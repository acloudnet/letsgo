Go 语言中使用包来组织代码，包类似于其他语言中的模块或库。用于支持模块化、封装、编译隔离和复用。

## 01 不要重复造轮子

由于 Go 语言生态的发展和社区各路大牛的努力，Go 语言目前已自带 100 多个包，凡是我们能想到的功能，都有相应的包能够实现。你可以在 [Go 官方标准库](https://golang.org/pkg/) 和 [中文版的标准库](https://studygolang.com/static/pkgdoc/main.html) 中看到这些包的说明。

所以说，在前人的努力下，作为一名开发者，我们更应该站在前人的肩膀上，去使用这些包，而不是重复造轮子。

## 02 包的声明

在 Go 语言中，每个 Go 源文件都隶属于一个包，所以，在每个文件的开头都需要进行包声明。包声明的形式如下：

```go
package xxx
```

xxx 指代包名，当该包被其他包导入时，作为其他包引用该包成员的默认标识符。

比如，我们导入一个随机数的包 `math/rand`，这个包有很多文件，每个文件开头都是 `package rand`，当其他包导入这个包时，我们就可以用形如 `rand.Int()` 的形式来引用包的成员，如下面的代码：


```go
package main
import (
	"fmt"
    "math/rand"
)

func main() {
    fmt.Println(rand.Int())
}
```


## 03 包的成员和可见性

通常，一个包由多个以 `.go` 结尾的文件组成，包的成员指代的就是包中每个文件中所定义的 **包成员变量和函数** ，包成员变量区分于 **本地局部变量** ，包成员变量可以理解成一个包的 **全局变量** 。

包的成员也分 **可导出成员** 和 **私有成员** ，可导出成员表示的是，这个成员对外部的包是可见的，任何包都可以引用，而私有成员则表示只有在当前文件可以引用。两者的区分仅仅是在对成员的命名上不同，可导出成员的命名以 **大写字母开头** ，比如前面提到的 `rand.Int()`。

## 04 特殊的 main 包

main 包可以理解成定义了 main 函数的包，main 函数是程序执行的入口，当一个 Go 项目编译运行时，编译器会去寻找 main 包中的 main 函数，编译运行生成可执行程序。main 包的声明为：

```go
package main
```

main 包是一个特殊的包，不能被其他包引用，只为 Go 程序的编译运行提供一个可执行的信号。



## 05 包的导入

当需要导入包时，我们只需在 Go 源文件中 `package xxx` 声明下，使用关键字 `import` 声明即可。

```go
package main

import "fmt"
```



当需要导入多个包时，通常使用一个 `import` 声明，加 `()` 的形式导入，如下：

```go
import (
	"fmt"
  	"os"
)
```



一般，使用分组排序的方式区分导入的多个包，通过空行进行分组，每一组按照字母表进行排序。如下：

```go
import (
	"fmt"
  	"html/template"
  	"os"
  
  	"golang.org/x/net/html"
  	"golang.org/x/net/ipv4"
)
```

也可以对导入的包自定义新的包名，如果同时导入两个有着相同名字的包，那么重新命名可以避免冲突。

```go
import (
	"crypto/rand"
    mrand "math/rand" // 将名称替换为mrand避免冲突
)
```

如果只希望导入包，而不使用任何包内的结构和类型，可以使用匿名导入包，如下：

```go
import (
    _ "path/to/package"
)
```

匿名导入包主要是期望使用包的 `init()` 函数进行环境初始化的场景。

## 06 包的导入路径

包的导入路径就是 `.go` 文件所在的目录，比如写一个 `hello.go` 的程序，该程序所在的目录（假设是 `hello`）就是该程序所对应包的导入路径，一般由 `GOPATH` 定义，比如可能是 `$GOPATH/src/letsgo/hello`。

当在其他包导入这个包时，只用取后面的部分即可，如：`import letsgo/hello`。



## 07 包的命名

我们可以自定义自己的包，在命名上需要遵循以下几点原则：

- 尽可能保持可读性和无歧义。包名尽量简短，但也需要具体，保证一定的可读性，比如工具类的包名使用 `ioutil`就比 `util`要好。
- 包名使用统一的形式。比如 `bytes` 、`errors` 和 `strings` 使用复数的形式，来避免和关键字的冲突。
- 避免使用有其他含义的包名。比如一个叫 `temp` 包，和常用的指代临时变量的名称 `temp` 重合了，这就会给人造成疑惑。



## 08 总结 

包的声明、成员、命名、导入

在 Go 语言中，任何文件皆属于包，main 包是一种特殊的包。